{{!--    Add companies view - using express handlebars     --}}
<title>Bug Tracker | Companies</title>
<link type="text/css" rel="stylesheet" href="/css/company.css">

{{!-- Access lvl 3 can edit companies --}}
{{#if (greater this.accessLevel 2)}}
    {{!-- Container for Companies Table --}}
    <div class="table-card card-lvl-3 mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
        <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
            <h2 class="mdl-card__title-text">Companies</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
            <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="recordTable">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Company Name</th>
                        <th class="mdl-data-table__cell--non-numeric">Date Joined</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each companies}}
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">{{this.companyName}}</td>
                        <td>{{this.dateJoined}}</td>
                        <td><a class="update-btn" href="/bug_tracker/companies/edit_company?companyId={{this.companyId}}">Update</a></td>
                        <td>
                            <input 
                                type="button" 
                                value="Delete" 
                                class="update-btn" 
                                onclick="deleteCompany('recordTable', this, {{this.companyId}})"
                            >
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
{{else}}
    {{!-- Container for Companies Table --}}
    <div class="table-card card-lvl-2 mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
        <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
            <h2 class="mdl-card__title-text">Companies</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
            <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="recordTable">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Company Name</th>
                        <th class="mdl-data-table__cell--non-numeric">Date Joined</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each companies}}
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">{{this.companyName}}</td>
                        <td>{{this.dateJoined}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
{{/if}}

{{#if (greater this.accessLevel 1)}}    
    {{!-- Container for the dashboard --}}
    <button onclick="window.location.href='/bug_tracker/companies/add_company'" class="btn-style" id="add-btn">
        Add Company
    </button>
    <br>
{{/if}}


<script src="/js/company.js"></script>
