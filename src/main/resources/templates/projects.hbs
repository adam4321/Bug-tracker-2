{{!--   New project view - using express handlebars    --}}
<title>Bug Tracker | Projects</title>
<link type="text/css" rel="stylesheet" href="/css/project.css">

{{!-- Access lvl 3 can edit projects --}}
{{#if (greater this.accessLevel 2)}}
    {{!-- Container for Projects Table --}}
    <div class="table-card card-lvl-3 mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop" id="main-box">
        <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
            <h2 class="mdl-card__title-text">Projects</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
            <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="recordTable">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Project Name</th>
                        <th class="mdl-data-table__cell--non-numeric">Company</th>
                        <th class="mdl-data-table__cell--non-numeric">Date Started</th>
                        <th class="mdl-data-table__cell--non-numeric">Last Updated</th>
                        <th class="mdl-data-table__cell--non-numeric">In Maintenance</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each projects}}
                        <tr>
                            <td class="mdl-data-table__cell--non-numeric">{{this.projectName}}</td>
                            <td class="mdl-data-table__cell--non-numeric">{{this.companyName}}</td>
                            <td>{{this.dateStarted}}</td>
                            <td>{{this.lastUpdated}}</td>
                            <td>{{#if this.inMaintenance}} Yes {{else}} No {{/if}}</td>
                            <td><a class="update-btn" href="/bug_tracker/projects/edit_project?projectId={{this.projectId}}">Update</a></td>
                            <td>
                                <input 
                                    type="button" 
                                    value="Delete" 
                                    class="update-btn" 
                                    onclick="deleteProject('recordTable', this, {{this.projectId}})"
                                >
                            </td>
                        </tr>
                    {{/each}}                
                </tbody>
            </table>
        </div>
    </div>
{{else}}
    {{!-- Container for Projects Table --}}
    <div class="table-card card-lvl-2 mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop" id="main-box">
        <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
            <h2 class="mdl-card__title-text">Projects</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
            <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="recordTable">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Project Name</th>
                        <th class="mdl-data-table__cell--non-numeric">Company</th>
                        <th class="mdl-data-table__cell--non-numeric">Date Started</th>
                        <th class="mdl-data-table__cell--non-numeric">Last Updated</th>
                        <th class="mdl-data-table__cell--non-numeric">In Maintenance</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each projects}}
                        <tr>
                            <td class="mdl-data-table__cell--non-numeric">{{this.projectName}}</td>
                            <td class="mdl-data-table__cell--non-numeric">{{this.companyName}}</td>
                            <td>{{this.dateStarted}}</td>
                            <td>{{this.lastUpdated}}</td>
                            <td>{{#if this.inMaintenance}} Yes {{else}} No {{/if}}</td>
                        </tr>
                    {{/each}}                
                </tbody>
            </table>
        </div>
    </div>
{{/if}}

{{#if (greater this.accessLevel 1)}}    
    {{!-- Container for the dashboard --}}
    <button onclick="window.location.href='/bug_tracker/projects/add_project'" class="btn-style" id="add-btn">
        Add Project
    </button>
    <br>
{{/if}}

<script src="/js/projects.js"></script>
